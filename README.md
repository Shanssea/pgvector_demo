# Exploring pgvector as a Vector Database 
This demo use Docker to containerize PostgreSQL with pgvector extension. This demo is created to document my exploration of PgVector. I'm open to any suggestion and correction.

## Installation
You can install PostgreSQL in any way. You can find the complete official guide [here](https://github.com/pgvector/pgvector). 
I use Docker container to deploy containerized PostgreSQL locally.
If you want to follow this installation guide for pgvector, make sure you already have Docker installed on your device.
1. We can install PostgreSQL easily by pulling the PostgreSQL image. You can use any version for the PostgreSQl. I use version 16.
    ```
    docker pull pgvector/pgvector:pg16
    ```
2. Run the container with the downloaded image and initialize your superuser password in the environment variable. By default, the username will be <i>postgres</i>.
    ```
    docker run -d --name pgvector -e POSTGRES_PASSWORD=<YOUR_PASSWORD> -p 5432:5432 --shm-size=256m pgvector/pgvector:pg16
    ```
3. Wait until deployment is complete. Then you can access the deployed container with SSH connection.
    ```
    docker exec -it pgvector sh
    ```
4. You can run this command to access PostgreSQL within the deployed container with superuser access.
    ```
    psql --user postgres
    ``` 

## Prepare the Data
1. Create your database. I use CLI here. You can use PgAdmin or any other similar tools.
    ```sql
    CREATE DATABASE pgvector_sandbox;
    \c pgvector_sandbox;
    ```
2. Since we want to use PgVector, we need to enable the extension first. Enable the extension by running the following command. This command only running in the current database.
    ```sql
    CREATE EXTENSION vector;
    ```
3. This demo use two dataset. </br>
    - First is [Wikipedia article dataset with vectors generated by Hugging Face](https://huggingface.co/datasets/Cohere/wikipedia-22-12-simple-embeddings). This dataset contains 485,859 article with generated vectors. We will use this dataset when comparing index function in PgVector.
    - Second is [Wikipedia Movie Plot from Kaggle by JustinR](https://www.kaggle.com/datasets/jrobischon/wikipedia-movie-plots). This dataset contains 35000 movies plot scraped from Wikipedia. We will generate the movie's plot vector embedding using GeminiAI with this dataset.</br></br>
    You may download the second dataset, since we will load the first one using [Hugging Face dataset library](https://huggingface.co/docs/hub/datasets-usage).
4. You ready to start the demo! Please refer to [similar_movies.ipynb](./similar_movies.ipynb) to continue.

</br>

References:
- [Manhattan Distance (Datacamp)](https://www.datacamp.com/tutorial/manhattan-distance) 
- [L2, Cosine Distance, and Inner Product (Ziliz)](https://zilliz.com/blog/similarity-metrics-for-vector-search)
- [Indexing Method in pgvector](https://aiven.io/developer/postgresql-pgvector-indexes)
- [Embedding in NLP (Pilehvar, Camacho-Collados)](https://books.google.co.id/books?hl=en&lr=&id=U90MEAAAQBAJ&oi=fnd&pg=PP2&dq=vector+embeddings&ots=rw4l0A6k4G&sig=gIsTMDXlSMql3EFGc63q-vRS_IY&redir_esc=y#v=onepage&q=vector%20embeddings&f=false)